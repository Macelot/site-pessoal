<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.js"></script>
    <link href="./fontawesome-free-6.5.2-web/css/fontawesome.css" rel="stylesheet" />
    <link href="./fontawesome-free-6.5.2-web/css/brands.css" rel="stylesheet" />
    <link href="./fontawesome-free-6.5.2-web/css/solid.css" rel="stylesheet" />
</head>
<body>
    <div class="container">
        <button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
            Novo Cadastro
        </button>
        <div class="collapse" id="collapseExample">
            <div class="card card-body">
                <div class="row">
                    <div class="col-12">
                        <input type="text" class="form-control" id="id" readonly>
                        <input type="text" class="form-control" id="nome" placeholder="Nome">
                        <input type="text" class="form-control" id="idade" placeholder="Idade">
                        <input type="text" class="form-control" id="telefone" placeholder="Telefone">
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <button class="btn btn-success" id="btnGrava" onclick="grava()"><i class="far fa-save"></i> Grava</button>
                        <button class="btn btn-dark" value="Lista" onclick="lista()"><i class="fas fa-eye"></i> Lista</button>
                        <button class="btn btn-primary" id="btnGravaAlt" onclick="gravaAlt()"><i class="far fa-edit"></i> Grava Alterações</button>
                    </div>
                </div>
            </div>
        </div>

        <hr>
        <div class="row">
            <div class="col-12">
                <button class="btn btn-secondary" id="btnCadastra" onclick="grava2()">Cadastra 2 <i class="fas fa-save fa-spin"></i> </button>
                <button class="btn btn-success" id="btnCadastra" onclick="grava10()"><i class="fas fa-sd-card  fa-spin"></i> 10 </button>
                <button class="btn btn-danger" id="btnCadastra" onclick="grava100()"><i class="fas fa-hdd fa-spin"></i> 100 </button>

                <input type="button" class="btn btn-warning" id="btnApagaTodos" value="Apaga Todos" onclick="apagaTodos()">
                <input type="button" class="btn btn-warning" id="btnPrimeiro" value="Apaga Primeiro" onclick="apagaPrimeiro()">
                <input type="button" class="btn btn-warning" id="btnUltimo" value="Apaga Último" onclick="apagaUltimo()">
                <input type="button" class="btn btn-primary" id="btnOrdena" value="Ordena Nome A..Z" onclick="ordenaAsc()">
                <input type="button" class="btn btn-primary" id="btnOrdena" value="Ordena Nome Z..A" onclick="ordenaDesc()">

            </div>
        </div>
        <hr>
       
        <input type="text" class="form-control" name="" id="digitou" onkeyup="busca(this.value)">
        <div id="local"></div>

        <div class="row">
            <div class="col d-flex justify-content-center">
                <h1> 
                <a href="#" onclick="primeiro()" class="btn btn-primary"> << </a>   
                <a href="#" onclick='voltar()' class="btn btn-primary"> < </a>

                <a href="#" onclick='proximo()' class="btn btn-primary"> > </a>
                <a href="#" onclick='ultimo()' class="btn btn-primary"> >> </a>
                </h1> 
            </div>
        </div>

        <div class="row">
            <div class="col">
                <div class="d-flex align-items-center">
                    <label for="pag" class="form-control form-control-lg">Exibir :</label>
                    <select onchange="mostra(this.value)" class="form form-control form-control-lg" name="quantidade" id="quantidade">
                        <option value="5">5</option>
                        <option value="7">7</option>
                        <option value="2">2</option>
                    </select>
                </div>
            </div>
        </div>


        

        <div class="container">
            <div class="row">
                <div class="col d-flex justify-content-center">
                    <nav aria-label="Page navigation example">
                        <ul class="pagination" id="listaPaginas">
                        <li class="page-item">
                            <a class="page-link" href="#" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                            <span class="sr-only">Primeiro</span>
                            </a>
                        </li>

                        <li class="page-item">
                            <a class="page-link" href="#" aria-label="Previous">
                            <span aria-hidden="true">&lsaquo;</span>
                            <span class="sr-only">Anterior</span>
                            </a>
                        </li>
                        <!-- Aqui os novos links vão aparecer -->
                        <li class="page-item">
                            <a class="page-link" href="#" aria-label="Next">
                            <span aria-hidden="true">&rsaquo;</span>
                            <span class="sr-only">Próximo</span>
                            </a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="#" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                            <span class="sr-only">Último</span>
                            </a>
                        </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col">
                <div class="d-flex align-items-center">
                    <label for="pag" class="form-control">Ir para :</label>
                    <select class="form-select" name="selIr" id="pag" onchange="mostra(this.value)">
                    </select>
                </div>
            </div>
        </div>

        <p id="quantosTemos">Total de Registros </p>

     </div>
    <script>
        function mostra(quantidade){
            console.log(inicio + " ate " + limite);
            inicio = (eval(quantidade)*maximo) - maximo;
            limite = (eval(quantidade)*maximo);
            console.log(inicio + " ate " + limite);
            lista();
        }

        var limite = 5;
        var inicio = 0;
        var maximo = 5;
        var alunos = []; 
        var aluno = new Object();
        aluno.nome='Cristian';
        aluno.idade=17;
        aluno.telefone='51 99887777111';
        alunos.push(aluno);
        aluno = new Object();
        aluno.nome='Pierre';
        aluno.idade=16;
        aluno.telefone='51 99887777222';
        alunos.push(aluno);
        console.table(alunos);
        function grava(){
            var n = document.getElementById('nome').value;
            var i = document.getElementById('idade').value;
            var t = document.getElementById('telefone').value;
            aluno = new Object();
            aluno.nome=n;
            aluno.idade=i;
            aluno.telefone=t;
            alunos.push(aluno);
            console.table(alunos);
        }
        function lista(){
            maximo = eval(document.getElementById('quantidade').value);
            var tabela = "<table class='table table-hover'>";
            tabela += "<thead>";
            tabela += "<tr>";
            tabela += "<th scope='col'>#</th>";
            tabela += "<th style='cursor:pointer' class='link-primary' scope='col' onclick='ordenaNome()' >Nome</th>";
            tabela += "<th scope='col'>Idade</th>";
            tabela += "<th scope='col'>Telefone</th>";
            tabela += "<th scope='col'>Operações</th>";
            tabela += "</tr>";
            tabela += "</thead>";
            document.getElementById('local').innerHTML="";
            var temp = "";
            var bkp = limite;
            console.log(limite);
            if(limite>alunos.length)
                limite=alunos.length
            for (let index = inicio; index < limite; index++) {
                const element = alunos[index];
                var btnApaga ='<input class="btn btn-danger" type="button" value="Apaga" onclick="apaga('+index+')">';
                var btnVisualiza ='<input class="btn btn-info" type="button" value="Visualiza" onclick="visualiza('+index+')">';
                temp+="<tr><td>"+index+"</td>";
                temp+="<td>"+element.nome+"</td>";
                temp+="<td>"+element.idade+"</td>";
                temp+="<td>"+element.telefone+"</td>";
                temp+="<td> "+btnVisualiza+" "+btnApaga+"</td></tr>";
            }
            if(limite==alunos.length)
                limite=bkp
            document.getElementById('local').innerHTML+=tabela+temp+"</table>";
            document.getElementById('quantosTemos').innerHTML=" Total de alunos "+alunos.length;
        }
        function apaga(id){
            var qual=id;
            console.log(qual);
            if(confirm("Tem certeza?"))
                alunos.splice(qual,1);
            lista();
        }
        function visualiza(id){
            var alunoClicado = alunos[id];
            console.table(alunoClicado);
            document.getElementById('nome').value=alunoClicado.nome;
            document.getElementById('idade').value=alunoClicado.idade;
            document.getElementById('telefone').value=alunoClicado.telefone;
            document.getElementById('id').value=id;
            document.getElementById('btnGrava').disabled=true;

        }
        function gravaAlt(){
            var n = document.getElementById('nome').value;
            var i = document.getElementById('idade').value;
            var t = document.getElementById('telefone').value;
            var id = document.getElementById('id').value;
            aluno = new Object();
            aluno.nome=n;
            aluno.idade=i;
            aluno.telefone=t;
            alunos[id] = aluno;
            lista();
            document.getElementById('btnGrava').disabled=false;
            document.getElementById('btnGravaAlt').disabled=true;

            document.getElementById('id').value="";
            document.getElementById('nome').value="";
            document.getElementById('idade').value="";
        }
        function apagaUltimo(id){
            var ult = alunos.length-1;
            if(confirm("Tem certeza?"))
                alunos.splice(ult,1);
            lista();
        }
        function apagaTodos(id){
            if(confirm("Tem certeza?"))
                alunos = [];
            lista();
        }
        function apagaPrimeiro(id){
            if(confirm("Tem certeza?"))
                alunos.splice(0,1);
            lista();
        }
        function grava2(){
            aluno = new Object();
            aluno.nome='João';
            aluno.idade=19;
            aluno.telefone='51 9988776655';
            alunos.push(aluno);
            aluno = new Object();
            aluno.nome='Mauricio';
            aluno.idade=21;
            aluno.telefone='51 9911223344';
            alunos.push(aluno);
        }

        function grava10(){
            var nomes = ["Máximo Balestero","Barnabé Carmona de Morais","Ezequiel Barreto de Palhares","Guilherme Maia","Hellen Brito Gonçalves","Marciane Galvão","Eva Valquíria Molina","Danilo Francisco Duarte do Amaral","Cauê Aragão Filho","Eduardo Faria de Ortiz"]
            for (let i = 0; i < nomes.length; i++) {
                aluno = new Object();
                aluno.nome=nomes[i];
                aluno.idade=19+i;
                aluno.telefone='51 99887766'+i;
                alunos.push(aluno);
            }
            lista();
        }
        function grava100(){
            for (let i = 0; i < 100; i++) {
                aluno = new Object();
                aluno.nome="Nome "+i;
                aluno.idade=19+i;
                aluno.telefone='51 998800'+i;
                alunos.push(aluno);
            }
            lista();
            //adicionar no select
            var tam = alunos.length;
            var paginas = parseInt(tam/5)+1;
            var elemento = document.getElementById('pag');

            for (let index = 0; index < paginas; index++) {
                var novaOpcao = document.createElement("option");
                novaOpcao.text = "Página "+(index+1);
                novaOpcao.value = (index+1);
                // Adicionar a nova opção ao select
                elemento.add(novaOpcao);
            }

            //adicionar na lista
            var lista_ = document.getElementById("listaPaginas");

            for (let index = 0; index < paginas; index++) {
                // Criar um novo elemento li
                var novoItem = document.createElement("li");
                novoItem.classList.add("page-item"); // Adicionando classe page-item
                // Adicionar conteúdo ao novo item
                var novoLink = document.createElement("a");
                novoLink.classList.add("page-link"); // Adicionando classe page-link
                novoLink.href = "#";
                novoLink.textContent = (index+1);
                novoItem.appendChild(novoLink);
                
                // Inserir o novo item na posição desejada
                var posicaoDesejada = 1+(index+1); // Índice da posição desejada (base zero)
                var itemNaPosicaoDesejada = lista_.children[posicaoDesejada];
                lista_.insertBefore(novoItem, itemNaPosicaoDesejada);
            }
        }
        function busca(valor){
            var tabela = "<table class='table table-hover'>";
            tabela += "<thead>";
            tabela += "<tr>";
            tabela += "<th scope='col'>#</th>";
            tabela += "<th scope='col'>-----------Nome</th>";
            tabela += "<th scope='col'>Idade</th>";
            tabela += "<th scope='col'>Telefone</th>";
            tabela += "<th scope='col'>Operações</th>";
            tabela += "</tr>";
            tabela += "</thead>";
            document.getElementById('local').innerHTML="";
            var temp = "";
            for (let index = 0; index < alunos.length; index++) {
                const element = alunos[index];
                if(element.nome.toLowerCase().includes(valor.toLowerCase())){
                    var btnApaga ='<input class="btn btn-danger" type="button" value="Apaga" onclick="apaga('+index+')">';
                    var btnVisualiza ='<input class="btn btn-info" type="button" value="Visualiza" onclick="visualiza('+index+')">';
                    temp+="<tr><td>"+index+"</td><td>"+element.nome+"</td><td>"+element.idade+"</td><td>"+element.telefone+"</td><td> "+btnVisualiza+" "+btnApaga+"</td></tr>";  
                }
                
            }
            document.getElementById('local').innerHTML+=tabela+temp+"</table>";
        }
        function ordenaAsc(){
            alunos.sort((a,b)=> a.nome>b.nome ? 1:-1);
            lista();
        }
        function ordenaDesc(){
            alunos.sort((a,b)=> a.nome>b.nome ? -1:1);
            lista();
        }
        var tipo = "ASC";
        function ordenaNome(){
            if(tipo=="ASC"){
                console.log("Ordenar Crescente");
                tipo = "DESC";
                ordenaAsc();
            }else{
                console.log("Ordenar Decrescente");
                tipo = "ASC";
                ordenaDesc();
            }
        }
        function primeiro(){
            inicio=0;
            limite = eval(document.getElementById('quantidade').value);
            lista();
        }
        function voltar(){
            if (inicio==0){
                return;
            }
            inicio=eval(inicio)-eval(maximo);
            limite=eval(limite)-eval(maximo);
            lista();
        }
        function proximo(){
            if ((inicio+maximo)>=alunos.length){
                return;
            }
            inicio=eval(inicio)+eval(maximo);
            limite=eval(limite)+eval(maximo);
            lista();
        }
        
        function ultimo(){
            maximo = eval(document.getElementById('quantidade').value);
            inicio=alunos.length-maximo;
            limite=alunos.length;
            lista();
        }

        $(document).ready(function(){
            $('.telefone').mask('(99) 9999-9999');
        });

        
    </script>
</body>
</html>